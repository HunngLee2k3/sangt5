extends layout

block content
  h2.text-center.mt-5 Admin Dashboard
  h3 Quản lý người dùng
  table.table.table-bordered
    thead
      tr
        th Username
        th Email
        th Role
        th Hành động
    tbody
      each user in users
        tr
          td= user.username
          td= user.email
          td= user.role
          td
            button.btn.btn-danger(onclick=`deleteUser('${user._id}')`) Xóa

  script.
    async function deleteUser(userId) {
      if (confirm('Bạn có chắc chắn muốn xóa người dùng này?')) {
        try {
          const response = await fetch(`/admin/users/${userId}`, {
            method: 'DELETE',
            headers: {
              'Content-Type': 'application/json'
            }
          });
          const result = await response.json();
          if (result.success) {
            alert('Xóa người dùng thành công!');
            window.location.reload();
          } else {
            alert('Lỗi: ' + result.message);
          }
        } catch (error) {
          alert('Lỗi: ' + error.message);
        }
      }
    }